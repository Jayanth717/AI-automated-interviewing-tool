<!DOCTYPE html>
<html>
<head>
  <style>
    .vega-actions a {
      margin-right: 12px;
      color: #757575;
      font-weight: normal;
      font-size: 13px;
    }
    .error {
      color: red;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/vega@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@2.6.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@3"></script>
</head>

<body>
  <div id="vis"></div>

  <script>
    var spec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v2.6.0.json",
      "config": {
        "view": { "width": 400, "height": 300 }
      },
      "datasets": {
        "emotionData": [ /* DATA UNCHANGED */ ]
      },
      "layer": [
        {
          "data": { "name": "emotionData" },
          "mark": { "type": "area", "color": "yellow" },
          "encoding": {
            "opacity": { "value": 0.3 },
            "x": { "field": "Time", "type": "quantitative" },
            "y": { "field": "Neutral", "type": "quantitative" }
          }
        },
        {
          "data": { "name": "emotionData" },
          "mark": { "type": "area", "color": "red" },
          "encoding": {
            "opacity": { "value": 0.3 },
            "x": { "field": "Time", "type": "quantitative" },
            "y": { "field": "Disgust", "type": "quantitative" }
          }
        },
        {
          "data": { "name": "emotionData" },
          "mark": { "type": "area", "color": "orange" },
          "encoding": {
            "opacity": { "value": 0.3 },
            "x": { "field": "Time", "type": "quantitative" },
            "y": { "field": "Fear", "type": "quantitative" }
          }
        },
        {
          "data": { "name": "emotionData" },
          "mark": { "type": "area", "color": "green" },
          "encoding": {
            "opacity": { "value": 0.3 },
            "x": { "field": "Time", "type": "quantitative" },
            "y": { "field": "Happy", "type": "quantitative" }
          }
        },
        {
          "data": { "name": "emotionData" },
          "mark": { "type": "area", "color": "purple" },
          "encoding": {
            "opacity": { "value": 0.3 },
            "x": { "field": "Time", "type": "quantitative" },
            "y": { "field": "Sad", "type": "quantitative" }
          }
        },
        {
          "data": { "name": "emotionData" },
          "mark": { "type": "area", "color": "pink" },
          "encoding": {
            "opacity": { "value": 0.3 },
            "x": { "field": "Time", "type": "quantitative" },
            "y": { "field": "Surprise", "type": "quantitative" }
          }
        }
      ]
    };

    function showError(el, error) {
      el.innerHTML =
        '<div class="error">' +
        '<p>JavaScript Error: ' + error.message + '</p>' +
        '<p>Check the console for full details.</p>' +
        '</div>';
      throw error;
    }

    const el = document.getElementById("vis");
    vegaEmbed("#vis", spec, { mode: "vega-lite" })
      .catch(err => showError(el, err));
  </script>
</body>
</html>
